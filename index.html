<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ì–æ—Ä–æ–¥—Å–∫–æ–π –°–∏–º—É–ª—è—Ç–æ—Ä ‚Äî –ü–∞—Ä—Ç–∏—Ü–∏–ø–∞—Ç–æ—Ä–Ω–æ–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Unbounded:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="app">

        <!-- –≠–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ -->
        <div id="login-screen" class="screen active">
            <div class="login-container">
                <div class="logo">
                    <div class="logo-icon">
                        <svg viewBox="0 0 100 100" fill="none">
                            <rect x="10" y="40" width="20" height="50" fill="currentColor" opacity="0.6"/>
                            <rect x="40" y="20" width="20" height="70" fill="currentColor"/>
                            <rect x="70" y="30" width="20" height="60" fill="currentColor" opacity="0.8"/>
                            <circle cx="50" cy="15" r="8" fill="var(--accent)"/>
                        </svg>
                    </div>
                    <h1>–ì–æ—Ä–æ–¥—Å–∫–æ–π –°–∏–º—É–ª—è—Ç–æ—Ä</h1>
                    <p class="subtitle">–ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–∞—Ä—Ç–∏—Ü–∏–ø–∞—Ç–æ—Ä–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</p>
                </div>
                
                <div class="login-tabs">
                    <button class="tab-btn active" data-tab="join">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è</button>
                    <button class="tab-btn" data-tab="create">–°–æ–∑–¥–∞—Ç—å —Å–µ—Å—Å–∏—é</button>
                </div>
                
                <div class="login-form" id="join-form">
                    <div class="input-group">
                        <label>–ö–æ–¥ —Å–µ—Å—Å–∏–∏</label>
                        <input type="text" id="session-code" placeholder="ABC123" maxlength="6">
                    </div>
                    <div class="input-group">
                        <label>–í–∞—à–µ –∏–º—è</label>
                        <input type="text" id="participant-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è">
                    </div>
                    <div class="input-group">
                        <label>–í–∞—à–∞ —Ä–µ–∞–ª—å–Ω–∞—è —Ä–æ–ª—å</label>
                        <select id="participant-real-role">
                            <option value="">–í—ã–±–µ—Ä–∏—Ç–µ —Ä–æ–ª—å...</option>
                            <option value="architect">–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä</option>
                            <option value="activist">–ê–∫—Ç–∏–≤–∏—Å—Ç</option>
                            <option value="resident">–ú–µ—Å—Ç–Ω—ã–π –∂–∏—Ç–µ–ª—å</option>
                            <option value="admin">–ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏</option>
                            <option value="business">–ü—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç–µ–ª—å –±–∏–∑–Ω–µ—Å-—Å–æ–æ–±—â–µ—Å—Ç–≤–∞</option>
                        </select>
                    </div>
                    <button class="btn btn-primary" id="join-btn">–í–æ–π—Ç–∏ –∫–∞–∫ —É—á–∞—Å—Ç–Ω–∏–∫</button>
                </div>
                
                <div class="login-form hidden" id="create-form">
                    <div class="input-group">
                        <label>–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞</label>
                        <input type="text" id="session-name" placeholder="–ë–ª–∞–≥–æ—É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–∞—Ä–∫–∞">
                    </div>
                    <div class="input-group">
                        <label>–í–∞—à–µ –∏–º—è (–º–æ–¥–µ—Ä–∞—Ç–æ—Ä)</label>
                        <input type="text" id="moderator-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è">
                    </div>
                    <div class="input-group">
                        <label>–ú–∞—Å—à—Ç–∞–± —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏</label>
                        <select id="project-scale">
                            <option value="small">üè° –ú–∞–ª—ã–π (–¥–≤–æ—Ä, —Å–∫–≤–µ—Ä)</option>
                            <option value="medium" selected>üèòÔ∏è –°—Ä–µ–¥–Ω–∏–π (–∫–≤–∞—Ä—Ç–∞–ª)</option>
                            <option value="large">üèôÔ∏è –ö—Ä—É–ø–Ω—ã–π (–º–∏–∫—Ä–æ—Ä–∞–π–æ–Ω)</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>–£—Ä–æ–≤–µ–Ω—å –±—é–¥–∂–µ—Ç–∞</label>
                        <select id="budget-level">
                            <option value="low">üí∞ –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π (800)</option>
                            <option value="medium" selected>üí∞üí∞ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π (1200)</option>
                            <option value="high">üí∞üí∞üí∞ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π (1800)</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>–ö–æ–¥ —Å–µ—Å—Å–∏–∏ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</label>
                        <input type="text" id="session-code-input" placeholder="–ê–≤—Ç–æ" maxlength="6">
                    </div>
                    <button class="btn btn-accent" id="create-btn">üöÄ –°–æ–∑–¥–∞—Ç—å —Å–µ—Å—Å–∏—é</button>
                </div>
                
                <div class="demo-link">
                    <button class="btn btn-ghost" id="demo-btn">–î–µ–º–æ-—Ä–µ–∂–∏–º</button>
                </div>
            </div>
        </div>
        
        <!-- –≠–∫—Ä–∞–Ω —É—á–∞—Å—Ç–Ω–∏–∫–∞ -->
        <div id="participant-screen" class="screen">
            <!-- –ë–æ–ª—å—à–æ–π –±–∞–Ω–Ω–µ—Ä —Ñ–∞–∑—ã -->
            <div class="phase-banner" id="phase-banner">
                <div class="phase-banner-content">
                    <span class="phase-banner-number">–§–ê–ó–ê 0</span>
                    <span class="phase-banner-title">–í–≤–æ–¥–Ω–∞—è</span>
                    <span class="phase-banner-desc">–ó–Ω–∞–∫–æ–º—Å—Ç–≤–æ —Å –ø—Ä–æ–µ–∫—Ç–æ–º</span>
                </div>
            </div>
            
            <header class="header">
                <div class="header-left">
                    <span class="session-badge" id="p-session-code"></span>
                    <h2 id="p-session-name">–°–∏–º—É–ª—è—Ü–∏—è</h2>
                    <div class="phase-indicator-small">
                        <span class="phase-label">–§–ê–ó–ê</span>
                        <span class="phase-number" id="p-phase">0</span>
                        <span class="phase-title" id="p-phase-title">–í–≤–æ–¥–Ω–∞—è</span>
                    </div>
                </div>
                <div class="header-center">
                    <!-- –ö—Ä—É–ø–Ω—ã–π –¥–∏—Å–ø–ª–µ–π –ò–ì–° –∫–∞–∫ –≤ En-ROADS -->
                    <div class="igs-hero" id="igs-hero">
                        <div class="igs-hero-label">–ò–ù–î–ï–ö–° –ì–û–†–û–î–°–ö–û–ô –°–†–ï–î–´</div>
                        <div class="igs-hero-value">
                            <span class="igs-number" id="igs-hero-value">42.5</span>
                            <span class="igs-max">/100</span>
                        </div>
                        <div class="igs-hero-bar">
                            <div class="igs-hero-fill" id="igs-hero-fill" style="width: 42.5%"></div>
                        </div>
                        <div class="igs-hero-budget">
                            <span>üí∞ –ë—é–¥–∂–µ—Ç:</span>
                            <span id="budget-display">0 / 1200</span>
                        </div>
                    </div>
                </div>
                <div class="header-right">
                    <span class="user-name" id="p-user-name"></span>
                    <button class="btn btn-icon" id="p-history-toggle" title="–ò—Å—Ç–æ—Ä–∏—è">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12,6 12,12 16,14"/>
                        </svg>
                    </button>
                </div>
            </header>
            
            <main class="main-content">
                <!-- –ö–∞—Ä—Ç–æ—á–∫–∞ –∏–≥—Ä–æ–≤–æ–π —Ä–æ–ª–∏ -->
                <div class="role-card" id="role-card">
                    <div class="role-header">
                        <span class="role-label">–í–ê–®–ê –ò–ì–†–û–í–ê–Ø –†–û–õ–¨</span>
                        <span class="role-team" id="role-team">–ö–æ–º–∞–Ω–¥–∞ A</span>
                    </div>
                    <div class="role-name" id="role-name">–ê—Ä—Ö–∏—Ç–µ–∫—Ç–æ—Ä</div>
                    <div class="role-desc" id="role-desc">–í—ã –æ—Ç—Å—Ç–∞–∏–≤–∞–µ—Ç–µ –∏–Ω—Ç–µ—Ä–µ—Å—ã –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–≥–æ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞</div>
                </div>
                
                <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞ / –°–æ–±—ã—Ç–∏–µ -->
                <div class="event-banner" id="event-banner">
                    <div class="event-icon">üì¢</div>
                    <div class="event-content">
                        <div class="event-title" id="event-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</div>
                        <div class="event-text" id="event-text">–û–∂–∏–¥–∞–π—Ç–µ –Ω–∞—á–∞–ª–∞ —Å–∏–º—É–ª—è—Ü–∏–∏ –æ—Ç –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞.</div>
                    </div>
                </div>
                
                <!-- –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ -->
                <div class="lock-overlay hidden" id="lock-overlay">
                    <div class="lock-message">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                            <circle cx="12" cy="16" r="1"/>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                        </svg>
                        <span id="lock-reason">–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω—ã</span>
                    </div>
                </div>
                
                <!-- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –∫–∞—Ä—Ç–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ -->
                <div class="territory-map-section">
                    <div class="section-header">
                        <h3>üó∫Ô∏è –°—Ö–µ–º–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏</h3>
                        <button class="btn btn-sm btn-ghost" id="toggle-map">–°–≤–µ—Ä–Ω—É—Ç—å</button>
                    </div>
                    <div class="territory-map" id="territory-map">
                        <svg viewBox="0 0 400 300" class="map-svg" id="map-svg">
                            <!-- –§–æ–Ω —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏ -->
                            <rect x="0" y="0" width="400" height="300" fill="#1a2332"/>
                            
                            <!-- –î–æ—Ä–æ–≥–∏ -->
                            <g class="map-roads">
                                <rect x="0" y="135" width="400" height="30" fill="#374151" class="road road-main"/>
                                <rect x="185" y="0" width="30" height="300" fill="#374151" class="road road-cross"/>
                            </g>
                            
                            <!-- –ó–µ–ª—ë–Ω—ã–µ –∑–æ–Ω—ã -->
                            <g class="map-green" id="map-green">
                                <rect x="20" y="20" width="80" height="100" rx="10" fill="#10b981" opacity="0.4" class="zone zone-park"/>
                                <rect x="300" y="180" width="80" height="100" rx="10" fill="#10b981" opacity="0.4" class="zone zone-park"/>
                                <ellipse cx="100" cy="220" rx="40" ry="30" fill="#10b981" opacity="0.3" class="zone zone-garden"/>
                            </g>
                            
                            <!-- –ó–¥–∞–Ω–∏—è -->
                            <g class="map-buildings" id="map-buildings">
                                <rect x="120" y="25" width="50" height="40" fill="#6366f1" opacity="0.6" class="building"/>
                                <rect x="230" y="25" width="60" height="35" fill="#6366f1" opacity="0.6" class="building"/>
                                <rect x="300" y="40" width="45" height="70" fill="#6366f1" opacity="0.6" class="building"/>
                                <rect x="25" y="180" width="70" height="50" fill="#6366f1" opacity="0.6" class="building"/>
                                <rect x="230" y="200" width="55" height="60" fill="#6366f1" opacity="0.6" class="building"/>
                            </g>
                            
                            <!-- –ü–µ—à–µ—Ö–æ–¥–Ω—ã–µ –¥–æ—Ä–æ–∂–∫–∏ -->
                            <g class="map-paths" id="map-paths">
                                <path d="M60 120 Q100 100 140 135" stroke="#f59e0b" stroke-width="3" fill="none" opacity="0.6"/>
                                <path d="M260 165 Q300 200 340 180" stroke="#f59e0b" stroke-width="3" fill="none" opacity="0.6"/>
                            </g>
                            
                            <!-- –¢–æ—á–∫–∏ –∏–Ω—Ç–µ—Ä–µ—Å–∞ -->
                            <g class="map-poi" id="map-poi">
                                <circle cx="60" cy="60" r="8" fill="#06d6a0" class="poi poi-playground" data-type="playground"/>
                                <circle cx="340" cy="230" r="8" fill="#06d6a0" class="poi poi-bench" data-type="bench"/>
                                <rect x="125" y="200" width="16" height="16" rx="3" fill="#f59e0b" class="poi poi-shop" data-type="shop"/>
                                <polygon points="320,60 328,76 312,76" fill="#ec4899" class="poi poi-transit" data-type="transit"/>
                            </g>
                            
                            <!-- –õ–µ–≥–µ–Ω–¥–∞ -->
                            <g class="map-legend" transform="translate(10, 270)">
                                <rect x="0" y="0" width="10" height="10" fill="#10b981" opacity="0.4"/>
                                <text x="15" y="9" fill="#9ca3af" font-size="8">–û–∑–µ–ª–µ–Ω–µ–Ω–∏–µ</text>
                                <rect x="70" y="0" width="10" height="10" fill="#6366f1" opacity="0.6"/>
                                <text x="85" y="9" fill="#9ca3af" font-size="8">–ó–¥–∞–Ω–∏—è</text>
                                <rect x="130" y="0" width="10" height="10" fill="#374151"/>
                                <text x="145" y="9" fill="#9ca3af" font-size="8">–î–æ—Ä–æ–≥–∏</text>
                            </g>
                        </svg>
                        
                        <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å –∫–∞—Ä—Ç—ã -->
                        <div class="map-info-panel" id="map-info">
                            <div class="map-stats">
                                <div class="map-stat">
                                    <span class="stat-icon">üå≥</span>
                                    <span class="stat-value" id="stat-green">32%</span>
                                    <span class="stat-label">–û–∑–µ–ª–µ–Ω–µ–Ω–∏–µ</span>
                                </div>
                                <div class="map-stat">
                                    <span class="stat-icon">üè¢</span>
                                    <span class="stat-value" id="stat-buildings">45%</span>
                                    <span class="stat-label">–ó–∞—Å—Ç—Ä–æ–π–∫–∞</span>
                                </div>
                                <div class="map-stat">
                                    <span class="stat-icon">üõ£Ô∏è</span>
                                    <span class="stat-value" id="stat-roads">23%</span>
                                    <span class="stat-label">–î–æ—Ä–æ–≥–∏</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã -->
                <div class="parameters-section">
                    <h3>–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞</h3>
                    <div class="parameters-grid" id="parameters-grid">
                        <!-- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è JS -->
                    </div>
                </div>
                
                <!-- –ö–Ω–æ–ø–∫–∞ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è -->
                <div class="confirm-section">
                    <button class="btn btn-confirm" id="confirm-btn" disabled>
                        <span>–ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Ä–µ—à–µ–Ω–∏–µ</span>
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="20,6 9,17 4,12"/>
                        </svg>
                    </button>
                    <div class="confirm-status" id="confirm-status"></div>
                </div>
            </main>
            
            <!-- –ë–æ–∫–æ–≤–∞—è –ø–∞–Ω–µ–ª—å –∏—Å—Ç–æ—Ä–∏–∏ -->
            <aside class="history-panel" id="history-panel">
                <div class="panel-header">
                    <h3>–ò—Å—Ç–æ—Ä–∏—è –¥–µ–π—Å—Ç–≤–∏–π</h3>
                    <button class="btn btn-icon" id="history-close">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <line x1="18" y1="6" x2="6" y2="18"/>
                            <line x1="6" y1="6" x2="18" y2="18"/>
                        </svg>
                    </button>
                </div>
                <div class="history-list" id="history-list">
                    <!-- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è JS -->
                </div>
            </aside>
        </div>
        
        <!-- –≠–∫—Ä–∞–Ω –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞ -->
        <div id="moderator-screen" class="screen">
            <header class="header moderator-header">
                <div class="header-left">
                    <span class="session-badge moderator-badge" id="m-session-code"></span>
                    <h2 id="m-session-name">–°–∏–º—É–ª—è—Ü–∏—è</h2>
                </div>
                <div class="header-center">
                    <div class="phase-controls">
                        <div class="phase-indicator">
                            <span class="phase-label">–§–ê–ó–ê</span>
                            <span class="phase-number" id="m-phase">0</span>
                            <span class="phase-title" id="m-phase-title">–í–≤–æ–¥–Ω–∞—è</span>
                        </div>
                        <button class="btn btn-accent" id="next-phase">
                            <span>–°–ª–µ–¥—É—é—â–∞—è —Ñ–∞–∑–∞</span>
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="9,18 15,12 9,6"/>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="header-right">
                    <button class="btn btn-warning" id="pause-btn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="6" y="4" width="4" height="16"/>
                            <rect x="14" y="4" width="4" height="16"/>
                        </svg>
                        <span>–ü–∞—É–∑–∞</span>
                    </button>
                    <button class="btn btn-icon" id="export-menu-btn" title="–≠–∫—Å–ø–æ—Ä—Ç">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="7,10 12,15 17,10"/>
                            <line x1="12" y1="15" x2="12" y2="3"/>
                        </svg>
                    </button>
                </div>
            </header>
            
            <div class="moderator-layout">
                <!-- –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å: –£—á–∞—Å—Ç–Ω–∏–∫–∏ -->
                <aside class="mod-sidebar left-sidebar">
                    <div class="sidebar-section">
                        <div class="section-header">
                            <h3>–£—á–∞—Å—Ç–Ω–∏–∫–∏</h3>
                            <span class="count-badge" id="participants-count">0</span>
                        </div>
                        <div class="participants-list" id="participants-list">
                            <!-- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è JS -->
                        </div>
                        <button class="btn btn-ghost btn-sm" id="add-bot-btn">+ –î–æ–±–∞–≤–∏—Ç—å –±–æ—Ç–∞</button>
                    </div>
                    
                    <div class="sidebar-section">
                        <div class="section-header">
                            <h3>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h3>
                        </div>
                        <div class="metrics-grid">
                            <div class="metric-card">
                                <div class="metric-label">–ö–æ–Ω—Ñ–ª–∏–∫—Ç D</div>
                                <div class="metric-value" id="metric-d" style="color: var(--danger)">‚Äî</div>
                                <div class="metric-desc">–†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥</div>
                            </div>
                            <div class="metric-card">
                                <div class="metric-label">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è</div>
                                <div class="metric-value" id="metric-s">‚Äî</div>
                                <div class="metric-desc">% –ø–æ–¥—Ç–≤–µ—Ä–¥–∏–≤—à–∏—Ö</div>
                            </div>
                            <div class="metric-card full-width">
                                <div class="metric-label">–ò–ì–° –ö–æ–Ω—Å–µ–Ω—Å—É—Å–∞</div>
                                <div class="consensus-bar">
                                    <div class="consensus-fill" id="consensus-fill"></div>
                                </div>
                                <div class="metric-value" id="consensus-value">‚Äî</div>
                            </div>
                        </div>
                    </div>
                </aside>
                
                <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å -->
                <main class="mod-main">
                    <!-- –¢–∞–±—ã -->
                    <div class="mod-tabs">
                        <button class="mod-tab active" data-panel="matrix">–ú–∞—Ç—Ä–∏—Ü–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤</button>
                        <button class="mod-tab" data-panel="chart">–ì—Ä–∞—Ñ–∏–∫–∏</button>
                        <button class="mod-tab" data-panel="events">–†–µ–¥–∞–∫—Ç–æ—Ä —Å–æ–±—ã—Ç–∏–π</button>
                        <button class="mod-tab" data-panel="log">–õ–æ–≥</button>
                    </div>
                    
                    <!-- –ü–∞–Ω–µ–ª—å: –ú–∞—Ç—Ä–∏—Ü–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ -->
                    <div class="mod-panel active" id="panel-matrix">
                        <div class="matrix-container">
                            <table class="params-matrix" id="params-matrix">
                                <!-- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è JS -->
                            </table>
                        </div>
                        <div class="matrix-legend">
                            <div class="legend-item">
                                <span class="legend-color low"></span>
                                <span>0-33</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color mid"></span>
                                <span>34-66</span>
                            </div>
                            <div class="legend-item">
                                <span class="legend-color high"></span>
                                <span>67-100</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- –ü–∞–Ω–µ–ª—å: –ì—Ä–∞—Ñ–∏–∫–∏ -->
                    <div class="mod-panel" id="panel-chart">
                        <div class="chart-container">
                            <canvas id="radar-chart"></canvas>
                        </div>
                        <div class="chart-container">
                            <canvas id="timeline-chart"></canvas>
                        </div>
                    </div>
                    
                    <!-- –ü–∞–Ω–µ–ª—å: –†–µ–¥–∞–∫—Ç–æ—Ä —Å–æ–±—ã—Ç–∏–π -->
                    <div class="mod-panel" id="panel-events">
                        <div class="events-editor">
                            <div class="events-templates">
                                <h4>–®–∞–±–ª–æ–Ω—ã —Å–æ–±—ã—Ç–∏–π</h4>
                                <div class="templates-list">
                                    <button class="template-btn" data-template="budget">
                                        üí∞ –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ –±—é–¥–∂–µ—Ç–∞
                                    </button>
                                    <button class="template-btn" data-template="protest">
                                        üì£ –ü—Ä–æ—Ç–µ—Å—Ç –∂–∏—Ç–µ–ª–µ–π
                                    </button>
                                    <button class="template-btn" data-template="eco">
                                        üåø –≠–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ
                                    </button>
                                    <button class="template-btn" data-template="investor">
                                        üèóÔ∏è –ò–Ω—Ç–µ—Ä–µ—Å –∏–Ω–≤–µ—Å—Ç–æ—Ä–∞
                                    </button>
                                    <button class="template-btn" data-template="tech">
                                        ‚ö†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å–±–æ–π
                                    </button>
                                    <button class="template-btn" data-template="custom">
                                        ‚úèÔ∏è –°–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ
                                    </button>
                                </div>
                            </div>
                            
                            <div class="event-form">
                                <h4>–°–æ–∑–¥–∞—Ç—å —Å–æ–±—ã—Ç–∏–µ</h4>
                                <div class="input-group">
                                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ</label>
                                    <input type="text" id="event-name-input" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è">
                                </div>
                                <div class="input-group">
                                    <label>–û–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤</label>
                                    <textarea id="event-desc-input" placeholder="–¢–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π —É–≤–∏–¥—è—Ç —É—á–∞—Å—Ç–Ω–∏–∫–∏"></textarea>
                                </div>
                                <div class="input-group">
                                    <label>–≠—Ñ—Ñ–µ–∫—Ç (—Ñ—É–Ω–∫—Ü–∏—è)</label>
                                    <select id="event-effect-select">
                                        <option value="none">–ë–µ–∑ —ç—Ñ—Ñ–µ–∫—Ç–∞</option>
                                        <option value="limit_max">–û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –º–∞–∫—Å–∏–º—É–º</option>
                                        <option value="limit_min">–û–≥—Ä–∞–Ω–∏—á–∏—Ç—å –º–∏–Ω–∏–º—É–º</option>
                                        <option value="lock">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä</option>
                                        <option value="force">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ</option>
                                        <option value="lock_all">–ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ</option>
                                    </select>
                                </div>
                                <div class="effect-params" id="effect-params">
                                    <!-- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
                                </div>
                                <button class="btn btn-accent" id="send-event-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–±—ã—Ç–∏–µ</button>
                            </div>
                            
                            <div class="events-queue">
                                <h4>–û—á–µ—Ä–µ–¥—å —Å–æ–±—ã—Ç–∏–π</h4>
                                <div class="queue-list" id="events-queue-list">
                                    <div class="empty-state">–ù–µ—Ç –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- –ü–∞–Ω–µ–ª—å: –õ–æ–≥ -->
                    <div class="mod-panel" id="panel-log">
                        <div class="log-controls">
                            <button class="btn btn-ghost btn-sm" id="clear-log">–û—á–∏—Å—Ç–∏—Ç—å</button>
                            <button class="btn btn-ghost btn-sm" id="export-log">–≠–∫—Å–ø–æ—Ä—Ç</button>
                        </div>
                        <div class="log-container" id="log-container">
                            <!-- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è JS -->
                        </div>
                    </div>
                </main>
                
                <!-- –ü—Ä–∞–≤–∞—è –ø–∞–Ω–µ–ª—å: –°–æ–æ–±—â–µ–Ω–∏—è -->
                <aside class="mod-sidebar right-sidebar">
                    <div class="sidebar-section">
                        <div class="section-header">
                            <h3>–°–æ–æ–±—â–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º</h3>
                        </div>
                        <textarea id="broadcast-message" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–ª—è –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤..."></textarea>
                        <button class="btn btn-primary" id="send-broadcast">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
                    </div>
                    
                    <div class="sidebar-section">
                        <div class="section-header">
                            <h3>–°—Ä–µ–¥–Ω–∏–π –≤–µ–∫—Ç–æ—Ä –≥—Ä—É–ø–ø—ã</h3>
                        </div>
                        <div class="avg-params" id="avg-params">
                            <!-- –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è JS -->
                        </div>
                    </div>
                    
                    <div class="sidebar-section">
                        <div class="section-header">
                            <h3>–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                        </div>
                        <div class="quick-actions">
                            <button class="btn btn-ghost btn-sm" id="reset-all-btn">–°–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã</button>
                            <button class="btn btn-ghost btn-sm" id="unlock-all-btn">–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë</button>
                            <button class="btn btn-ghost btn-sm" id="force-confirm-btn">–ü—Ä–∏–Ω—è—Ç—å –∑–∞ –≤—Å–µ—Ö</button>
                        </div>
                    </div>
                </aside>
            </div>
            
            <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∞ -->
            <div class="modal hidden" id="export-modal">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h3>
                        <button class="btn btn-icon modal-close">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <line x1="18" y1="6" x2="6" y2="18"/>
                                <line x1="6" y1="6" x2="18" y2="18"/>
                            </svg>
                        </button>
                    </div>
                    <div class="export-options">
                        <button class="export-btn" data-format="json">
                            <span class="export-icon">{ }</span>
                            <span class="export-label">JSON</span>
                        </button>
                        <button class="export-btn" data-format="csv">
                            <span class="export-icon">üìä</span>
                            <span class="export-label">CSV</span>
                        </button>
                        <button class="export-btn" data-format="xlsx">
                            <span class="export-icon">üìó</span>
                            <span class="export-label">XLSX</span>
                        </button>
                        <button class="export-btn" data-format="pdf">
                            <span class="export-icon">üìÑ</span>
                            <span class="export-label">PDF –û—Ç—á—ë—Ç</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è -->
    <div class="notifications" id="notifications"></div>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    
    <script src="app.js"></script>
</body>
</html>

